<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js"></script>
</head>
<body>
<h2>공지사항 관리</h2>
<form id="addNoticeForm">
    <input type="text" id="title" placeholder="제목" required>
    <textarea id="content" placeholder="내용" required></textarea>
    <button type="button" onclick="addNotice()">추가</button>
</form>
<table>
    <tr th:each="noticelist : ${noticelists}">
        <td th:text="${noticelist.id}"></td>
        <td th:text="${noticelist.title}"></td>
        <td th:text="${noticelist.content}"></td>
        <td>
            <button onclick="deleteNotice(${noticelist.id})">삭제</button>
        </td>
    </tr>
</table>
<!-- 스크립트 부분 -->
<script>
    function addNotice(){
        const title = $('#title').val();
        const content = $('#content').val();
        const notice = {
            "title" : title ,
            "content" : content
        }
        //공지사항 등록 처리 ajax
        $.ajax({
            url: '/admin/noticeEventControl/add',
            type: 'Post',
            contentType : 'application/json',
            dataType : JSON.stringify(noticelist),
            success :function(res){
                            /*성공시 처리 */
                        },
            error :function(xhr, status, error){
                    console.error('에러',error);
                    alert('공지사항 등록 실패');
            }
        })
    }
    function deleteNotice(id){
        //공지 사항 삭제 처리 ajax
        $.ajax({
            url: 'admin/noticeEventControl/delete',
            type: 'Post',
            contentType: 'application/json',
            dataType: JSON.stringify(noticelist),
            success : function (res) {

            },
            error: function (xhr,status,error) {
                console.error('에러뜸',error);
                alert('공지사항 삭제 실패');
            }
        })
    }
</script>
<div id="result"></div>
</body>
</html>