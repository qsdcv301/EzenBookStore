<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>아이디 및 비밀번호 찾기</title>
    <link rel="canonical" href="https://getbootstrap.kr/docs/5.1/examples/blog/">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" rel="stylesheet">
    <link href="/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="/css/style.css" rel="stylesheet"/>
    <script src="/js/jquery-3.7.1.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/popper.min.js"></script>
    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/script.js"></script>
</head>
<body>
<header th:replace="~{fragments/header :: header}"></header>
<div class="container mt-5">
    <div class="row">
        <div class="col d-flex justify-content-center align-items-center">
            <div class="card" id="mainCard">
                <div class="card-header" id="cardHeader">
                    <h3 class="text-center">아이디 / 비밀번호 찾기</h3>
                </div>
                <div id="beforeFind">
                    <div class="card-body" id="cardBody">
                        <!-- 버튼 섹션 -->
                        <div class="text-center mb-3">
                            <button type="button" class="btn btn-primary" id="showFindIdBtn">아이디 찾기</button>
                            <button type="button" class="btn btn-secondary" id="showResetPwBtn">비밀번호 재설정</button>
                        </div>

                        <!-- 아이디 찾기 폼 -->
                        <div id="findId">
                            <div class="form-group">
                                <label for="nameForId">이름</label>
                                <input type="text" class="form-control" id="nameForId" name="name"
                                       placeholder="이름을 입력하세요"
                                       required>
                            </div>
                            <div class="form-group">
                                <label for="telForId">전화 번호</label>
                                <div class="input-group">
                                    <input type="text" class="form-control" id="telForId" name="tel"
                                           placeholder="010-1234-1234"
                                           required>
                                </div>
                            </div>
                            <div class="text-center">
                                <button type="button" class="btn btn-success" id="findIdBtn">아이디 찾기</button>
                            </div>
                        </div>
                        <p id="idResult" class="mt-3 text-center" style="display: none;"></p>
                        <div id="providerResult" class="mt-3 text-center" style="display: none;"></div>
                        <!-- 비밀번호 재설정 준비 폼 -->
                        <div id="initialForm" class="mt-3" style="display: none;">

                            <div class='form-group'>
                                <label for='emailForPw'>아이디(이메일)</label>
                                <div class='input-group'>
                                    <input type='email' class='form-control' id='emailForPw' placeholder='이메일을 입력하세요'
                                           required>
                                    <div class='input-group-append'>
                                        <button type='button' class='btn btn-secondary emailAuthenticationBtn'
                                                id='sendVerificationCodeForPw'>인증번호 발송
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- 인증번호 입력 필드 (초기에는 숨김) -->
                            <div class='form-group' id='verificationCodeGroupForPw' style='display: none;'>
                                <label for='verificationCodeForPw'>인증번호</label>
                                <input type='text' class='form-control' id='verificationCodeForPw'
                                       placeholder='인증번호를 입력하세요'
                                       required>
                            </div>
                            <div class="form-group">
                                <label for="telForPw">전화 번호</label>
                                <div class="input-group">
                                    <input type="text" class="form-control" id="telForPw" name="tel"
                                           placeholder="010-1234-1234"
                                           required>
                                </div>
                            </div>
                            <p id='pwResultError' class='mt-3 text-center text-danger' style='display:none;'></p>
                            <div class="text-center">
                                <button type='button' class='btn btn-success' id="newPassword">비밀번호 재설정</button>
                            </div>
                        </div>

                        <div id="afterFind" style="display: none">
                            <div class='form-group'>
                                <label for='newPw'>새 비밀번호</label>
                                <input type='password' class='form-control' id='newPw' name="password"
                                       placeholder='새 비밀번호를 입력하세요'
                                       required>
                            </div>
                            <div class='form-group'>
                                <label for='confirmPassword'>비밀번호 확인</label>
                                <input type='password' class='form-control' id='confirmPassword'
                                       placeholder='비밀번호를 다시 입력하세요'
                                       required>
                            </div>
                            <p id='pwConfirmError' class='mt-3 text-center text-danger' style='display:none;'></p>
                            <p id='pwResultSuccess' class='mt-3 text-center text-success' style='display:none;'></p>
                            <input type='hidden' id='hiddenEmail' name='email'>
                            <button type='button' class='btn btn-find btn-block' id="updateBtn">비밀번호 변경</button>
                        </div>
                    </div>
                    <div class='card-footer text-center'>
                        <a href='/login' class='text-decoration-none'>로그인 화면으로</a> /
                        <a href="/signup" class="text-decoration-none">회원가입 화면으로</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<footer th:replace="~{fragments/footer :: footer}"></footer>
</body>
</html>